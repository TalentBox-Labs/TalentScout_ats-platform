(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[598],{582:function(e,t,a){Promise.resolve().then(a.bind(a,6361))},6361:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var s=a(7437),r=a(2265),n=a(9827),i=a(1713),c=a(1770),o=a(9116),l=a(6070),d=a(2869),u=a(5974),h=a(4508);let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,h.cn)("w-full caption-bottom text-sm",a),...r})})});m.displayName="Table";let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("thead",{ref:t,className:(0,h.cn)("[&_tr]:border-b",a),...r})});p.displayName="TableHeader";let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,h.cn)("[&_tr:last-child]:border-0",a),...r})});f.displayName="TableBody",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,h.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tr",{ref:t,className:(0,h.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});g.displayName="TableRow";let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("th",{ref:t,className:(0,h.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});x.displayName="TableHead";let v=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("td",{ref:t,className:(0,h.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});v.displayName="TableCell",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("caption",{ref:t,className:(0,h.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption";var y=a(5805),b=a(9663),j=a(3745),w=a(4286),N=a(8906),_=a(4438);function k(){let[e,t]=(0,r.useState)(null),a=(0,n.NL)(),{data:h,isLoading:k,error:C}=(0,i.a)({queryKey:["adminUsers"],queryFn:async()=>await o.x.getAllUsers()}),T=(0,c.D)({mutationFn:async e=>{let{userId:t,data:a}=e;return await o.x.updateUserAdminFields(t,a)},onSuccess:()=>{a.invalidateQueries({queryKey:["adminUsers"]}),_.Am.success("User updated successfully")},onError:e=>{_.Am.error("Failed to update user"),console.error("Update user error:",e)}}),R=async e=>{await T.mutateAsync({userId:e.id,data:{is_active:!e.is_active}})},A=async e=>{await T.mutateAsync({userId:e.id,data:{is_super_admin:!e.is_super_admin}})};return k?(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage all users across the platform"})]})}),(0,s.jsx)(l.Zb,{children:(0,s.jsx)(l.aY,{className:"pt-6",children:(0,s.jsx)("div",{className:"animate-pulse space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"h-10 w-10 bg-gray-200 rounded-full"}),(0,s.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-48"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-32"})]}),(0,s.jsx)("div",{className:"h-6 bg-gray-200 rounded w-16"})]},t))})})})]}):C?(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage all users across the platform"})]})}),(0,s.jsx)(l.Zb,{className:"border-red-200 bg-red-50",children:(0,s.jsx)(l.aY,{className:"pt-6",children:(0,s.jsx)("p",{className:"text-red-600",children:"Failed to load users. Please try again."})})})]}):(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage all users across the platform"})]}),(0,s.jsxs)(u.C,{variant:"secondary",className:"bg-blue-100 text-blue-800 border-blue-200",children:[(0,s.jsx)(y.Z,{className:"w-4 h-4 mr-1"}),(null==h?void 0:h.length)||0," Users"]})]}),(0,s.jsxs)(l.Zb,{children:[(0,s.jsxs)(l.Ol,{children:[(0,s.jsx)(l.ll,{children:"All Users"}),(0,s.jsx)(l.SZ,{children:"View and manage user accounts, permissions, and status"})]}),(0,s.jsx)(l.aY,{children:(0,s.jsxs)(m,{children:[(0,s.jsx)(p,{children:(0,s.jsxs)(g,{children:[(0,s.jsx)(x,{children:"User"}),(0,s.jsx)(x,{children:"Email"}),(0,s.jsx)(x,{children:"Status"}),(0,s.jsx)(x,{children:"Role"}),(0,s.jsx)(x,{children:"Joined"}),(0,s.jsx)(x,{className:"text-right",children:"Actions"})]})}),(0,s.jsx)(f,{children:null==h?void 0:h.map(e=>{var t,a;return(0,s.jsxs)(g,{children:[(0,s.jsx)(v,{children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"h-8 w-8 rounded-full bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center text-white text-sm font-semibold",children:"".concat(null===(t=e.first_name)||void 0===t?void 0:t[0]).concat(null===(a=e.last_name)||void 0===a?void 0:a[0]).toUpperCase()}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-medium",children:[e.first_name," ",e.last_name]}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.title||"No title"})]})]})}),(0,s.jsx)(v,{children:e.email}),(0,s.jsx)(v,{children:(0,s.jsx)(u.C,{variant:e.is_active?"secondary":"destructive",children:e.is_active?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Z,{className:"w-3 h-3 mr-1"}),"Active"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Z,{className:"w-3 h-3 mr-1"}),"Inactive"]})})}),(0,s.jsx)(v,{children:e.is_super_admin?(0,s.jsxs)(u.C,{variant:"secondary",className:"bg-red-100 text-red-800 border-red-200",children:[(0,s.jsx)(w.Z,{className:"w-3 h-3 mr-1"}),"Super Admin"]}):(0,s.jsx)(u.C,{variant:"outline",children:"User"})}),(0,s.jsx)(v,{children:new Date(e.created_at).toLocaleDateString()}),(0,s.jsx)(v,{className:"text-right",children:(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,s.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>R(e),className:e.is_active?"text-red-600 hover:text-red-700":"text-green-600 hover:text-green-700",children:e.is_active?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Z,{className:"w-4 h-4 mr-1"}),"Deactivate"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Z,{className:"w-4 h-4 mr-1"}),"Activate"]})}),(0,s.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>A(e),className:e.is_super_admin?"text-orange-600 hover:text-orange-700":"text-purple-600 hover:text-purple-700",children:e.is_super_admin?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.Z,{className:"w-4 h-4 mr-1"}),"Remove Admin"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.Z,{className:"w-4 h-4 mr-1"}),"Make Admin"]})})]})})]},e.id)})})]})})]})]})}},5974:function(e,t,a){"use strict";a.d(t,{C:function(){return c}});var s=a(7437);a(2265);var r=a(535),n=a(4508);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:a}),t),...r})}},2869:function(e,t,a){"use strict";a.d(t,{z:function(){return l}});var s=a(7437),r=a(2265),n=a(7495),i=a(535),c=a(4508);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:l=!1,...d}=e,u=l?n.g7:"button";return(0,s.jsx)(u,{className:(0,c.cn)(o({variant:r,size:i,className:a})),ref:t,...d})});l.displayName="Button"},6070:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return n},aY:function(){return l},ll:function(){return c}});var s=a(7437),r=a(2265);let n=r.forwardRef((e,t)=>{let{className:a="",...r}=e;return(0,s.jsx)("div",{ref:t,className:"rounded-lg border border-gray-200 bg-white shadow-sm ".concat(a),...r})});n.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a="",...r}=e;return(0,s.jsx)("div",{ref:t,className:"flex flex-col space-y-1.5 p-6 ".concat(a),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:a="",...r}=e;return(0,s.jsx)("h3",{ref:t,className:"text-lg font-semibold leading-none tracking-tight ".concat(a),...r})});c.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:a="",...r}=e;return(0,s.jsx)("p",{ref:t,className:"text-sm text-gray-500 ".concat(a),...r})});o.displayName="CardDescription";let l=r.forwardRef((e,t)=>{let{className:a="",...r}=e;return(0,s.jsx)("div",{ref:t,className:"p-6 pt-0 ".concat(a),...r})});l.displayName="CardContent"},9116:function(e,t,a){"use strict";a.d(t,{x:function(){return i}});var s=a(3464);let r="http://localhost:8000";class n{getToken(){return localStorage.getItem("access_token")}setToken(e){localStorage.setItem("access_token",e)}setRefreshToken(e){localStorage.setItem("refresh_token",e)}getRefreshToken(){return localStorage.getItem("refresh_token")}clearToken(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")}setAuthToken(e){this.setToken(e)}async login(e,t){let a=new URLSearchParams;a.append("username",e),a.append("password",t);let s=await this.client.post("/api/v1/auth/login",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return this.setToken(s.data.access_token),s.data.refresh_token&&this.setRefreshToken(s.data.refresh_token),s.data}async register(e){let t=await this.client.post("/api/v1/auth/register",{email:e.email,password:e.password,first_name:e.first_name,last_name:e.last_name,organization_name:e.organization_name},{headers:{"Content-Type":"application/json"}});return this.setToken(t.data.access_token),t.data.refresh_token&&this.setRefreshToken(t.data.refresh_token),t.data}async refreshAccessToken(){let e=this.getRefreshToken();if(!e)throw Error("No refresh token available");let t=await this.client.post("/api/v1/auth/refresh",{refresh_token:e});return this.setToken(t.data.access_token),t.data}async forgotPassword(e){return(await this.client.post("/api/v1/auth/forgot-password",{email:e})).data}async resetPassword(e,t){return(await this.client.post("/api/v1/auth/reset-password",{token:e,new_password:t})).data}async getCurrentUser(){return(await this.client.get("/api/v1/auth/me")).data}async logout(){this.clearToken()}async getJobs(e){return(await this.client.get("/api/v1/jobs",{params:e})).data}async getJob(e){return(await this.client.get("/api/v1/jobs/".concat(e))).data}async createJob(e){return(await this.client.post("/api/v1/jobs",e)).data}async updateJob(e,t){return(await this.client.patch("/api/v1/jobs/".concat(e),t)).data}async deleteJob(e){await this.client.delete("/api/v1/jobs/".concat(e))}async getCandidates(e){return(await this.client.get("/api/v1/candidates",{params:e})).data}async getCandidate(e){return(await this.client.get("/api/v1/candidates/".concat(e))).data}async createCandidate(e){return(await this.client.post("/api/v1/candidates",e)).data}async updateCandidate(e,t){return(await this.client.patch("/api/v1/candidates/".concat(e),t)).data}async uploadResume(e,t){let a=new FormData;return a.append("file",t),(await this.client.post("/api/v1/candidates/".concat(e,"/resume"),a,{headers:{"Content-Type":"multipart/form-data"}})).data}async getApplications(e){return(await this.client.get("/api/v1/applications",{params:e})).data}async getApplication(e){return(await this.client.get("/api/v1/applications/".concat(e))).data}async createApplication(e){return(await this.client.post("/api/v1/applications",e)).data}async updateApplicationStage(e,t){return(await this.client.patch("/api/v1/applications/".concat(e,"/stage"),{current_stage:t})).data}async getAnalytics(){return(await this.client.get("/api/v1/analytics")).data}async getInterviews(){return(await this.client.get("/api/v1/interviews")).data}async getIntegrations(){return(await this.client.get("/api/v1/integrations")).data}async connectIntegration(e){return(await this.client.post("/api/v1/integrations/".concat(e,"/connect"))).data}async disconnectIntegration(e){return(await this.client.post("/api/v1/integrations/".concat(e,"/disconnect"))).data}async updateIntegrationConfig(e,t){return(await this.client.put("/api/v1/integrations/".concat(e,"/config"),t)).data}async getOnboardingStatus(){return(await this.client.get("/api/v1/onboarding/status")).data}async completeOnboardingStep(e){return(await this.client.post("/api/v1/onboarding/complete/".concat(e))).data}async updateCompany(e){return(await this.client.put("/api/v1/company",e)).data}async parseResume(e){let t=new FormData;return t.append("file",e),(await this.client.post("/api/v1/ai/parse-resume",t,{headers:{"Content-Type":"multipart/form-data"}})).data}async screenCandidate(e){return(await this.client.post("/api/v1/ai/screen/".concat(e))).data}async generateEmail(e){return(await this.client.post("/api/v1/ai/generate-email",{template_type:e.email_type,context:{candidate_name:e.candidate_name,job_title:e.job_title,company_name:e.company_name},tone:e.tone})).data}async getPublicJob(e){return(await s.Z.get("".concat(r,"/api/v1/jobs/public/").concat(e))).data}async getShareLinks(e){return(await this.client.get("/api/v1/jobs/".concat(e,"/share-links"))).data}async trackShare(e,t){return(await this.client.post("/api/v1/jobs/".concat(e,"/track-share"),{platform:t})).data}async updateSalaryVisibility(e,t){return(await this.client.patch("/api/v1/jobs/".concat(e,"/salary-visibility"),{show_salary_public:t})).data}async publishJobPublic(e){return(await this.client.post("/api/v1/jobs/".concat(e,"/publish-public"))).data}async unpublishJob(e){return(await this.client.post("/api/v1/jobs/".concat(e,"/unpublish"))).data}async getAllUsers(){return(await this.client.get("/api/v1/admin/users")).data}async getAllOrganizations(){return(await this.client.get("/api/v1/admin/organizations")).data}async getPlatformStats(){return(await this.client.get("/api/v1/admin/stats")).data}async updateUserAdminFields(e,t){return(await this.client.patch("/api/v1/admin/users/".concat(e),t)).data}constructor(){this.client=s.Z.create({baseURL:r}),this.client.interceptors.request.use(e=>{let t=this.getToken();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,async e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(this.clearToken(),window.location.href="/auth/login"),Promise.reject(e)})}}let i=new n},4508:function(e,t,a){"use strict";a.d(t,{cn:function(){return n},p6:function(){return i}});var s=a(1994),r=a(3335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}function i(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}}},function(e){e.O(0,[464,137,713,473,918,971,117,744],function(){return e(e.s=582)}),_N_E=e.O()}]);