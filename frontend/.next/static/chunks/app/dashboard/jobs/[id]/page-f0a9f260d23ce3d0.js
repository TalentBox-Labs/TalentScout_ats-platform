(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[35],{7109:function(e,s,i){Promise.resolve().then(i.bind(i,3446))},3446:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return S}});var a=i(7437),t=i(7648),l=i(9376),c=i(1713),n=i(9116),r=i(4508),d=i(2265),o=i(9827),x=i(1770),m=i(2869),u=i(6070),h=i(8804);let j=d.forwardRef((e,s)=>{let{className:i,...t}=e;return(0,a.jsx)(h.fC,{className:(0,r.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",i),...t,ref:s,children:(0,a.jsx)(h.bU,{className:(0,r.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});j.displayName=h.fC.displayName;var b=i(5974),p=i(9202),f=i(6337),N=i(5805),g=i(2208),y=i(401),v=i(8867),_=i(8919),w=i(5116);function k(e){let{job:s}=e,[i,t]=(0,d.useState)(!1),[l,c]=(0,d.useState)(!1),r=(0,o.NL)(),h=(0,x.D)({mutationFn:()=>n.x.publishJobPublic(s.id),onSuccess:()=>{r.invalidateQueries({queryKey:["job",s.id]})}}),k=(0,x.D)({mutationFn:()=>n.x.unpublishJob(s.id),onSuccess:()=>{r.invalidateQueries({queryKey:["job",s.id]}),t(!1)}}),S=(0,x.D)({mutationFn:e=>n.x.updateSalaryVisibility(s.id,e),onSuccess:()=>{r.invalidateQueries({queryKey:["job",s.id]})}}),O=async()=>{s.is_public?await k.mutateAsync():await h.mutateAsync()},Z=async e=>{await S.mutateAsync(e)},q=async()=>{if(s.public_slug){let e="".concat(window.location.origin,"/jobs/").concat(s.public_slug);await navigator.clipboard.writeText(e),c(!0),setTimeout(()=>c(!1),2e3)}},P=h.isPending||k.isPending||S.isPending;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(u.Zb,{children:[(0,a.jsx)(u.Ol,{children:(0,a.jsxs)(u.ll,{className:"flex items-center gap-2",children:[s.is_public?(0,a.jsx)(p.Z,{className:"h-5 w-5 text-green-600"}):(0,a.jsx)(f.Z,{className:"h-5 w-5 text-gray-400"}),"Public Job Posting"]})}),(0,a.jsxs)(u.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:s.is_public?"Job is publicly visible":"Job is private"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:s.is_public?"Anyone with the link can view this job posting":"Only team members can view this job"})]}),(0,a.jsx)(m.z,{onClick:O,disabled:P||"open"!==s.status,variant:s.is_public?"destructive":"default",size:"sm",children:P?"...":s.is_public?"Unpublish":"Publish Publicly"})]}),"open"!==s.status&&(0,a.jsx)("p",{className:"text-xs text-amber-600 bg-amber-50 p-2 rounded",children:"Only open jobs can be published publicly"})]})]}),s.is_public&&(0,a.jsxs)(u.Zb,{children:[(0,a.jsx)(u.Ol,{children:(0,a.jsxs)(u.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(N.Z,{className:"h-5 w-5"}),"Public Engagement"]})}),(0,a.jsx)(u.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:s.view_count||0}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Views"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:s.share_count||0}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Shares"})]})]})})]}),s.is_public&&s.public_slug&&(0,a.jsxs)(u.Zb,{children:[(0,a.jsx)(u.Ol,{children:(0,a.jsxs)(u.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5"}),"Public URL"]})}),(0,a.jsxs)(u.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("code",{className:"flex-1 text-xs bg-muted p-2 rounded font-mono",children:"".concat(window.location.origin,"/jobs/").concat(s.public_slug)}),(0,a.jsx)(m.z,{size:"sm",variant:"outline",onClick:q,className:"shrink-0",children:l?(0,a.jsx)(y.Z,{className:"h-4 w-4"}):(0,a.jsx)(v.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>t(!i),className:"w-full",children:[(0,a.jsx)(_.Z,{className:"h-4 w-4 mr-2"}),i?"Hide":"Show"," Share Options"]})]})]}),i&&s.is_public&&(0,a.jsxs)(u.Zb,{children:[(0,a.jsx)(u.Ol,{children:(0,a.jsx)(u.ll,{children:"Share This Job"})}),(0,a.jsx)(u.aY,{children:(0,a.jsx)(w.t,{jobId:s.id,jobTitle:s.title})})]}),s.is_public&&(0,a.jsxs)(u.Zb,{children:[(0,a.jsx)(u.Ol,{children:(0,a.jsx)(u.ll,{children:"Salary Visibility"})}),(0,a.jsx)(u.aY,{className:"space-y-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Show salary on public page"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:s.show_salary_public?"Salary information is visible to applicants":"Salary information is hidden from public view"})]}),(0,a.jsx)(j,{checked:s.show_salary_public||!1,onCheckedChange:Z,disabled:P})]})})]}),s.is_public&&s.share_metadata&&Object.keys(s.share_metadata).length>0&&(0,a.jsxs)(u.Zb,{children:[(0,a.jsx)(u.Ol,{children:(0,a.jsx)(u.ll,{children:"Share Statistics"})}),(0,a.jsx)(u.aY,{children:(0,a.jsx)("div",{className:"space-y-2",children:Object.entries(s.share_metadata).map(e=>{let[s,i]=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm capitalize",children:s}),(0,a.jsx)(b.C,{variant:"secondary",children:i})]},s)})})})]})]})}function S(){var e;let s=(0,l.useParams)(),i=(null==s?void 0:s.id)||"",{data:d,isLoading:o,error:x}=(0,c.a)({queryKey:["job",i],enabled:!!i,queryFn:async()=>await n.x.getJob(i)});return i?o?(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading job..."}):x||!d?(0,a.jsx)("p",{className:"text-sm text-destructive",children:"Failed to load job."}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:d.title}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[d.location||"Remote"," \xb7"," ",(0,a.jsx)("span",{className:"capitalize",children:d.job_type.replace("_"," ")})]})]}),(0,a.jsx)(t.default,{href:"/dashboard/jobs",className:"text-xs font-medium text-primary hover:underline",children:"Back to jobs"})]}),(0,a.jsxs)("div",{className:"grid gap-4 lg:grid-cols-[2fr,1fr,1fr]",children:[(0,a.jsxs)("section",{className:"space-y-4 rounded-lg border bg-card p-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm font-semibold",children:"Description"}),(0,a.jsx)("p",{className:"mt-1 whitespace-pre-wrap text-sm text-muted-foreground",children:d.description||"No description provided."})]}),d.requirements&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm font-semibold",children:"Requirements"}),(0,a.jsx)("p",{className:"mt-1 whitespace-pre-wrap text-sm text-muted-foreground",children:d.requirements})]}),d.responsibilities&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm font-semibold",children:"Responsibilities"}),(0,a.jsx)("p",{className:"mt-1 whitespace-pre-wrap text-sm text-muted-foreground",children:d.responsibilities})]})]}),(0,a.jsxs)("aside",{className:"space-y-3 rounded-lg border bg-card p-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:"Status"}),(0,a.jsx)("div",{className:"text-sm capitalize",children:d.status.replace("_"," ")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:"Department"}),(0,a.jsx)("div",{className:"text-sm",children:d.department||"Not specified"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:"Created"}),(0,a.jsx)("div",{className:"text-sm",children:(0,r.p6)(d.created_at)})]}),(d.salary_min||d.salary_max)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:"Salary range"}),(0,a.jsx)("div",{className:"text-sm",children:d.salary_min&&d.salary_max?"".concat(d.salary_min.toLocaleString(),"â€“").concat(d.salary_max.toLocaleString()," ").concat(d.salary_currency):d.salary_min?"".concat(d.salary_min.toLocaleString(),"+ ").concat(d.salary_currency):"".concat(null===(e=d.salary_max)||void 0===e?void 0:e.toLocaleString()," ").concat(d.salary_currency)})]}),d.skills_required&&d.skills_required.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:"Required skills"}),(0,a.jsx)("div",{className:"mt-1 flex flex-wrap gap-1",children:d.skills_required.map(e=>(0,a.jsx)("span",{className:"rounded-full bg-muted px-2 py-0.5 text-xs",children:e},e))})]})]}),(0,a.jsx)("aside",{className:"space-y-4",children:(0,a.jsx)(k,{job:d})})]})]}):(0,a.jsx)("p",{className:"text-sm text-destructive",children:"Missing job ID."})}}},function(e){e.O(0,[464,137,972,763,850,13,357,772,971,117,744],function(){return e(e.s=7109)}),_N_E=e.O()}]);